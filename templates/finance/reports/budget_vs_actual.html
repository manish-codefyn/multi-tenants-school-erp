{% extends 'layouts/dashboard.html' %}
{% load i18n static humanize %}

{% block title %}{% trans "Budget vs Actual Report" %}{% endblock %}

{% block content %}
    {% url 'finance:financial_report_list' as list_url %}
    {% include 'partials/breadcrumb.html' with page_title=_("Budget vs Actual") current_text=_("Budget Analysis") parent_text=_("Reports") parent_url=list_url %}

     <!-- Filters -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body bg-light rounded-3">
             <form method="get" class="row g-3">
                 <div class="col-md-9">
                     <label class="form-label small text-muted">{% trans "Fiscal Year" %}</label>
                     <select name="year" class="form-select">
                         <option value="">{% trans "Current Fiscal Year" %}</option>
                         <!-- Years would be populated here dynamically -->
                     </select>
                 </div>
                 <div class="col-md-3 d-flex align-items-end">
                     <button type="submit" class="btn btn-primary w-100">{% trans "Update Report" %}</button>
                 </div>
             </form>
        </div>
    </div>

    <!-- Comparison Table -->
    <div class="card border-0 shadow-sm">
        <div class="card-header bg-white py-3">
            <h5 class="mb-0">{% trans "Budget Performance" %}</h5>
        </div>
        <div class="card-body p-0">
             <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th class="ps-4">{% trans "Category" %}</th>
                            <th>{% trans "Budgeted" %}</th>
                            <th>{% trans "Actual Spend" %}</th>
                            <th>{% trans "Variance" %}</th>
                            <th class="text-end pe-4">{% trans "% Utilized" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Placeholder Data -->
                        <tr>
                            <td class="ps-4">Infrastructure</td>
                            <td>₹5,00,000</td>
                            <td>₹2,50,000</td>
                            <td class="text-success">+₹2,50,000</td>
                            <td class="text-end pe-4">
                                <div class="d-flex align-items-center justify-content-end">
                                    <span class="me-2">50%</span>
                                    <div class="progress" style="width: 50px; height: 6px;">
                                        <div class="progress-bar bg-info" style="width: 50%"></div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="ps-4">Lab Equipment</td>
                            <td>₹1,00,000</td>
                            <td>₹1,10,000</td>
                            <td class="text-danger">-₹10,000</td>
                            <td class="text-end pe-4">
                                <div class="d-flex align-items-center justify-content-end">
                                    <span class="me-2 text-danger">110%</span>
                                    <div class="progress" style="width: 50px; height: 6px;">
                                        <div class="progress-bar bg-danger" style="width: 100%"></div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                         <tr>
                            <td colspan="5" class="text-center py-4 text-muted">{% trans "Select a fiscal year to view data." %}</td>
                        </tr>
                    </tbody>
                </table>
             </div>
        </div>
    </div>
{% endblock %}
