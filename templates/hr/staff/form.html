{% extends 'layouts/dashboard.html' %}
{% load i18n crispy_forms_tags %}

{% block title %}{% if object %}{% trans "Edit Staff" %}{% else %}{% trans "Add Staff" %}{% endif %}{% endblock %}

{% block content %}
        {% url 'hr:staff_list' as list_url %}
        {% if object %}
            {% include 'partials/breadcrumb.html' with page_title=_("Edit Staff Profile") parent_text=_("Staff Management") parent_url=list_url current_text=_("Edit") %}
        {% else %}
            {% include 'partials/breadcrumb.html' with page_title=_("Add New Staff") parent_text=_("Staff Management") parent_url=list_url current_text=_("Add") %}
        {% endif %}

        <div class="row justify-content-center">
            <div class="col-lg-10">

            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white py-3 border-bottom">
                    <p class="text-muted mb-0">{% trans "Please fill in the details below. Fields marked with * are required." %}</p>
                </div>
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data" novalidate>
                        {% csrf_token %}
                        
                        <!-- Personal Information -->
                        <h6 class="text-primary text-uppercase small font-weight-bold mb-3 mt-2">{% trans "Personal Information" %}</h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                {{ form.first_name|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.last_name|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.personal_email|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.personal_phone|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.date_of_birth|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.gender|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.marital_status|as_crispy_field }}
                            </div>
                             <div class="col-md-6">
                                {{ form.nationality|as_crispy_field }}
                            </div>
                             <div class="col-md-6">
                                {{ form.blood_group|as_crispy_field }}
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- Employment Details -->
                        <h6 class="text-primary text-uppercase small font-weight-bold mb-3">{% trans "Employment Details" %}</h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                {{ form.department|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.designation|as_crispy_field }}
                            </div>
                            <!-- Employee ID is likely auto-generated or not in form -->
                            <div class="col-md-4">
                                {{ form.joining_date|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.employment_type|as_crispy_field }}
                            </div>
                             <div class="col-md-4">
                                {{ form.employment_status|as_crispy_field }}
                            </div>
                             <div class="col-md-6">
                                {{ form.work_email|as_crispy_field }}
                            </div>
                             <div class="col-md-6">
                                {{ form.work_phone|as_crispy_field }}
                            </div>
                             <div class="col-md-12">
                                {{ form.work_location|as_crispy_field }}
                            </div>
                        </div>

                         <hr class="my-4">
                         
                        <!-- Additional Info -->
                        <h6 class="text-primary text-uppercase small font-weight-bold mb-3">{% trans "Emergency Contact" %}</h6>
                        <div class="row g-3">
                            <div class="col-md-4">
                                {{ form.emergency_contact_name|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.emergency_contact_relation|as_crispy_field }}
                            </div>
                             <div class="col-md-4">
                                {{ form.emergency_contact_phone|as_crispy_field }}
                            </div>
                        </div>
                        
                        <div class="row g-3 mt-2">
                             <div class="col-md-6">
                                {{ form.qualifications|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.specialization|as_crispy_field }}
                            </div>
                        </div>

                        <div class="d-flex justify-content-end gap-2 mt-5">
                            <a href="{% url 'hr:staff_list' %}" class="btn btn-light">{% trans "Cancel" %}</a>
                            <button type="submit" class="btn btn-primary px-4">
                                <i class="bx bx-save me-2"></i>{% trans "Save Staff" %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
