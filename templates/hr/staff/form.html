{% extends 'layouts/dashboard.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{% if form.instance.pk %}Edit Staff{% else %}Add Staff{% endif %} | {{ block.super }}{% endblock %}

{% block content %}
<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
    <div class="breadcrumb-title pe-3">Human Resources</div>
    <div class="ps-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0 p-0">
                <li class="breadcrumb-item"><a href="{% url 'dashboard_redirect' %}"><i class="bx bx-home-alt"></i></a></li>
                <li class="breadcrumb-item"><a href="{% url 'hr:staff_list' %}">Staff Directory</a></li>
                <li class="breadcrumb-item active" aria-current="page">{% if form.instance.pk %}Edit Staff{% else %}Add Staff{% endif %}</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-xl-9 mx-auto">
        <div class="card border-top border-0 border-4 border-primary">
            <div class="card-body p-5">
                <div class="card-title d-flex align-items-center">
                    <div><i class="bx bxs-user me-1 font-22 text-primary"></i></div>
                    <h5 class="mb-0 text-primary">{% if form.instance.pk %}Edit Staff Member{% else %}Add New Staff Member{% endif %}</h5>
                </div>
                <hr>
                <form method="post" enctype="multipart/form-data" class="row g-3">
                    {% csrf_token %}
                    
                    <div class="col-12">
                        <div class="alert alert-info border-0 bg-info alert-dismissible fade show py-2">
                            <div class="d-flex align-items-center">
                                <div class="font-35 text-white"><i class='bx bx-info-circle'></i></div>
                                <div class="ms-3">
                                    <h6 class="mb-0 text-white">Note</h6>
                                    <div class="text-white">Ensure the User account is created before adding Staff details, or select an existing user.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Personal Info -->
                    <h6 class="mb-0 text-uppercase">Personal Information</h6>
                    <hr/>
                    <div class="col-md-6">
                        {{ form.user|as_crispy_field }}
                    </div>
                  
                    <div class="col-md-4">
                        {{ form.date_of_birth|as_crispy_field }}
                    </div>
                    <div class="col-md-4">
                        {{ form.gender|as_crispy_field }}
                    </div>
                    <div class="col-md-4">
                        {{ form.blood_group|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.marital_status|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.nationality|as_crispy_field }}
                    </div>

                    <!-- Employment Info -->
                    <h6 class="mb-0 text-uppercase mt-4">Employment Details</h6>
                    <hr/>
                    <div class="col-md-6">
                        {{ form.department|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.designation|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.employment_type|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.employment_status|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.joining_date|as_crispy_field }}
                    </div>
                 

                    <!-- Contact Info -->
                    <h6 class="mb-0 text-uppercase mt-4">Contact Information</h6>
                    <hr/>
                    <div class="col-md-6">
                        {{ form.personal_email|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.personal_phone|as_crispy_field }}
                    </div>
                    <div class="col-md-12">
                        {{ form.work_email|as_crispy_field }}
                    </div>

                    <div class="col-12 mt-4">
                        <button type="submit" class="btn btn-primary px-5">Save Staff Details</button>
                        <a href="{% url 'hr:staff_list' %}" class="btn btn-secondary px-5">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
