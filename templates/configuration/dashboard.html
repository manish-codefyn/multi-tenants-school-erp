{% extends 'layouts/dashboard.html' %}
{% load i18n static %}

{% block title %}{% trans "Configuration" %}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="h3">{% trans "Configuration Dashboard" %}</h2>
        <p class="text-muted">{% trans "Manage system-wide settings and preferences" %}</p>
    </div>
</div>

<div class="row g-4 mb-4">
    <!-- Quick Stats -->
    <div class="col-md-3">
        <div class="card h-100 border-primary border-start border-4">
            <div class="card-body">
                <div class="text-muted mb-2">{% trans "System Settings" %}</div>
                <div class="h2 mb-0">{{ system_settings_count }}</div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{% url 'configuration:setting_list' %}" class="btn btn-sm btn-outline-primary w-100">
                    {% trans "Manage" %} <i class="bx bx-arrow-right ms-1"></i>
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card h-100 border-success border-start border-4">
            <div class="card-body">
                <div class="text-muted mb-2">{% trans "Active Integrations" %}</div>
                <div class="h2 mb-0">{{ active_integrations }}</div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{% url 'configuration:integration_list' %}" class="btn btn-sm btn-outline-success w-100">
                    {% trans "Manage" %} <i class="bx bx-arrow-right ms-1"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <!-- Module Configurations -->
    <div class="col-12">
        <h4 class="mb-3">{% trans "Module Configurations" %}</h4>
    </div>
    
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-primary rounded-circle">
                        <i class="bx bx-graduation-cap"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Academic" %}</h5>
                        <small class="text-muted">{% if has_academic %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Manage academic year, grading, attendance rules, and other academic policies." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:academic_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-success rounded-circle">
                        <i class="bx bx-money-bill-wave"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Financial" %}</h5>
                        <small class="text-muted">{% if has_financial %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Manage currency, tax settings, invoice templates, and payment gateways." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:financial_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-danger rounded-circle">
                        <i class="bx bx-shield-alt"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Security" %}</h5>
                        <small class="text-muted">{% if has_security %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Manage password policies, session timeouts, and IP restrictions." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:security_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-warning rounded-circle">
                        <i class="bx bx-bell"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Notifications" %}</h5>
                        <small class="text-muted">{% if has_notification %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Configure email, SMS, and other notification channels and templates." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:notification_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-info rounded-circle">
                        <i class="bx bx-paint"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Appearance" %}</h5>
                        <small class="text-muted">{% if has_appearance %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Customize branding, themes, logos, and custom CSS/JS." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:appearance_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="flex-shrink-0 btn-lg btn-soft-dark rounded-circle">
                        <i class="bx bx-database"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="card-title mb-0">{% trans "Backup & Recovery" %}</h5>
                        <small class="text-muted">{% if has_backup %}{% trans "Configured" %}{% else %}{% trans "Not Configured" %}{% endif %}</small>
                    </div>
                </div>
                <p class="card-text text-muted">{% trans "Configure automated backups, frequency, and retention policies." %}</p>
            </div>
            <div class="card-footer bg-transparent">
                <a href="{% url 'configuration:backup_config' %}" class="btn btn-primary w-100">{% trans "Configure" %}</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
