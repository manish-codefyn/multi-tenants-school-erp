{% extends 'layouts/dashboard.html' %}
{% load static %}

{% block title %}Report Card - {{ exam.name }}{% endblock %}

{% block content %}

        <!-- Breadcrumb -->
        <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
            <div class="breadcrumb-title pe-3">Examinations</div>
            <div class="ps-3">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb mb-0 p-0">
                        <li class="breadcrumb-item"><a href="{% url 'exams:student_result' %}"><i class="bx bx-home-alt"></i></a></li>
                        <li class="breadcrumb-item active" aria-current="page">Report Card</li>
                    </ol>
                </nav>
            </div>
            <div class="ms-auto">
                <button onclick="window.print()" class="btn btn-secondary"><i class='bx bx-printer'></i> Print</button>
            </div>
        </div>

        <div class="card border-top border-0 border-4 border-primary">
            <div class="card-body p-5">
                <div class="text-center mb-5">
                    <h2 class="text-primary">{{ request.tenant.name }}</h2>
                    <h5>Academic Report Card</h5>
                    <p class="mb-0">{{ exam.academic_year }}</p>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <th width="150">Student Name:</th>
                                <td>{{ student.get_full_name }}</td>
                            </tr>
                            <tr>
                                <th>Roll Number:</th>
                                <td>{{ student.student_profile.roll_number|default:"-" }}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <th width="150">Exam:</th>
                                <td>{{ exam.name }}</td>
                            </tr>
                            <tr>
                                <th>Date:</th>
                                <td>{{ exam.start_date|date:"M d, Y" }}</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="table-responsive mb-4">
                    <table class="table table-bordered table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th>Subject</th>
                                <th class="text-center">Max Marks</th>
                                <th class="text-center">Marks Obtained</th>
                                <th class="text-center">Grade</th>
                                <th>Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for mark in marks %}
                            <tr>
                                <td>{{ mark.exam_schedule.subject.name }}</td>
                                <td class="text-center">{{ mark.exam_schedule.max_marks }}</td>
                                <td class="text-center">
                                    {% if mark.is_absent %}
                                        <span class="text-danger">Absent</span>
                                    {% else %}
                                        {{ mark.marks_obtained }}
                                    {% endif %}
                                </td>
                                <td class="text-center">{{ mark.grade|default:"-" }}</td>
                                <td>{{ mark.remarks|default:"" }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="row mt-5">
                    <div class="col-md-4 text-center">
                        <hr>
                        <p>Class Teacher</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <hr>
                        <p>Principal</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <hr>
                        <p>Parent/Guardian</p>
                    </div>
                </div>
            </div>
        </div>
  
{% endblock %}
