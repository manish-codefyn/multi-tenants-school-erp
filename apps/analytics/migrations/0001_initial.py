# Generated by Django 4.2.7 on 2025-12-13 04:15

from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('academics', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='AuditAlert',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('alert_type', models.CharField(choices=[('REAL_TIME', 'Real-time Alert'), ('DAILY_SUMMARY', 'Daily Summary'), ('WEEKLY_REVIEW', 'Weekly Review'), ('MONTHLY_REPORT', 'Monthly Report')], max_length=50)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('details', models.JSONField(default=dict)),
                ('severity', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], max_length=20)),
                ('status', models.CharField(choices=[('NEW', 'New'), ('IN_REVIEW', 'In Review'), ('ACKNOWLEDGED', 'Acknowledged'), ('RESOLVED', 'Resolved'), ('FALSE_POSITIVE', 'False Positive')], default='NEW', max_length=20)),
                ('acknowledged_at', models.DateTimeField(blank=True, null=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('resolution_notes', models.TextField(blank=True, null=True)),
                ('is_notified', models.BooleanField(default=False)),
                ('notification_sent_at', models.DateTimeField(blank=True, null=True)),
                ('auto_remediation_attempted', models.BooleanField(default=False)),
                ('auto_remediation_successful', models.BooleanField(default=False)),
                ('auto_remediation_notes', models.TextField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Audit Alert',
                'verbose_name_plural': 'Audit Alerts',
                'ordering': ['-created_at', 'severity'],
            },
        ),
        migrations.CreateModel(
            name='AuditAnalysisReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('name', models.CharField(max_length=200)),
                ('report_type', models.CharField(choices=[('DAILY_SUMMARY', 'Daily Activity Summary'), ('WEEKLY_COMPLIANCE', 'Weekly Compliance Report'), ('MONTHLY_AUDIT', 'Monthly Audit Trail'), ('SECURITY_REVIEW', 'Security Review'), ('USER_ACTIVITY', 'User Activity Report'), ('TENANT_ACTIVITY', 'Tenant Activity Report'), ('CUSTOM', 'Custom Report')], max_length=50)),
                ('format', models.CharField(choices=[('PDF', 'PDF'), ('EXCEL', 'Excel'), ('CSV', 'CSV'), ('JSON', 'JSON'), ('HTML', 'HTML')], default='PDF', max_length=10)),
                ('start_date', models.DateTimeField()),
                ('end_date', models.DateTimeField()),
                ('filters', models.JSONField(default=dict)),
                ('file_path', models.FileField(blank=True, null=True, upload_to='audit_reports/')),
                ('file_size', models.IntegerField(blank=True, null=True)),
                ('file_hash', models.CharField(blank=True, max_length=64, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('PROCESSING', 'Processing'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('EXPIRED', 'Expired')], default='PENDING', max_length=20)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('generation_time', models.DateTimeField(blank=True, null=True)),
                ('download_count', models.IntegerField(default=0)),
                ('last_downloaded', models.DateTimeField(blank=True, null=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('is_archived', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Audit Analysis Report',
                'verbose_name_plural': 'Audit Analysis Reports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AuditDashboard',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('layout_config', models.JSONField(default=dict)),
                ('widget_configs', models.JSONField(default=list)),
                ('is_shared', models.BooleanField(default=False)),
                ('is_default', models.BooleanField(default=False)),
                ('refresh_interval_minutes', models.IntegerField(default=5)),
            ],
            options={
                'verbose_name': 'Audit Dashboard',
                'verbose_name_plural': 'Audit Dashboards',
                'ordering': ['-is_default', 'name'],
            },
        ),
        migrations.CreateModel(
            name='AuditMetric',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('name', models.CharField(max_length=200)),
                ('metric_type', models.CharField(choices=[('COUNT', 'Count'), ('SUM', 'Sum'), ('AVERAGE', 'Average'), ('RATE', 'Rate'), ('PERCENTAGE', 'Percentage'), ('DURATION', 'Duration')], max_length=20)),
                ('description', models.TextField(blank=True, null=True)),
                ('query_filter', models.JSONField(default=dict)),
                ('group_by_fields', models.JSONField(default=list)),
                ('aggregation_field', models.CharField(blank=True, max_length=100, null=True)),
                ('calculation_schedule', models.CharField(choices=[('HOURLY', 'Hourly'), ('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly'), ('REAL_TIME', 'Real-time')], default='DAILY', max_length=50)),
                ('warning_threshold', models.FloatField(blank=True, null=True)),
                ('critical_threshold', models.FloatField(blank=True, null=True)),
                ('last_calculated', models.DateTimeField(blank=True, null=True)),
                ('last_value', models.FloatField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Audit Metric',
                'verbose_name_plural': 'Audit Metrics',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AuditMetricValue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('timestamp', models.DateTimeField(db_index=True)),
                ('value', models.FloatField()),
                ('period_start', models.DateTimeField()),
                ('period_end', models.DateTimeField()),
                ('period_type', models.CharField(max_length=20)),
                ('sample_count', models.IntegerField(blank=True, null=True)),
                ('min_value', models.FloatField(blank=True, null=True)),
                ('max_value', models.FloatField(blank=True, null=True)),
                ('avg_value', models.FloatField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Audit Metric Value',
                'verbose_name_plural': 'Audit Metric Values',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='AuditPattern',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('name', models.CharField(max_length=200)),
                ('pattern_type', models.CharField(choices=[('SECURITY_THREAT', 'Security Threat'), ('ANOMALY', 'Anomaly'), ('TREND', 'Trend'), ('COMPLIANCE_ISSUE', 'Compliance Issue'), ('PERFORMANCE_ISSUE', 'Performance Issue'), ('BEHAVIOR_PATTERN', 'Behavior Pattern')], max_length=50)),
                ('description', models.TextField()),
                ('severity', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='MEDIUM', max_length=20)),
                ('detection_rules', models.JSONField()),
                ('threshold', models.FloatField(default=1.0)),
                ('time_window_minutes', models.IntegerField(default=60)),
                ('occurrence_count', models.IntegerField(default=0)),
                ('first_detected', models.DateTimeField(blank=True, null=True)),
                ('last_detected', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_auto_remediate', models.BooleanField(default=False)),
                ('recommended_actions', models.JSONField(default=list)),
            ],
            options={
                'verbose_name': 'Audit Pattern',
                'verbose_name_plural': 'Audit Patterns',
                'ordering': ['-severity', '-last_detected'],
            },
        ),
        migrations.CreateModel(
            name='Dashboard',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('title', models.CharField(max_length=200, verbose_name='Dashboard Title')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('layout_type', models.CharField(choices=[('GRID', 'Grid Layout'), ('FLEX', 'Flexible Layout'), ('SINGLE', 'Single Column'), ('CUSTOM', 'Custom Layout')], default='GRID', max_length=20, verbose_name='Layout Type')),
                ('config', models.JSONField(default=dict, verbose_name='Dashboard Configuration')),
                ('filters', models.JSONField(blank=True, default=dict, verbose_name='Global Filters')),
                ('theme', models.CharField(default='light', max_length=50, verbose_name='Theme')),
                ('is_public', models.BooleanField(default=False, verbose_name='Is Public')),
                ('allowed_roles', models.JSONField(blank=True, default=list, verbose_name='Allowed Roles')),
                ('is_template', models.BooleanField(default=False, verbose_name='Is Template')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('refresh_interval', models.PositiveIntegerField(blank=True, null=True, verbose_name='Refresh Interval (seconds)')),
                ('last_refresh', models.DateTimeField(blank=True, null=True, verbose_name='Last Refresh')),
            ],
            options={
                'verbose_name': 'Dashboard',
                'verbose_name_plural': 'Dashboards',
                'db_table': 'analytics_dashboard',
                'ordering': ['title', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DashboardWidget',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('title', models.CharField(max_length=200, verbose_name='Widget Title')),
                ('widget_type', models.CharField(choices=[('KPI', 'KPI Card'), ('CHART', 'Chart'), ('TABLE', 'Data Table'), ('HEATMAP', 'Heat Map'), ('MAP', 'Geographic Map'), ('TEXT', 'Text Widget'), ('FILTER', 'Filter Widget')], max_length=20, verbose_name='Widget Type')),
                ('chart_type', models.CharField(blank=True, choices=[('LINE', 'Line Chart'), ('BAR', 'Bar Chart'), ('PIE', 'Pie Chart'), ('SCATTER', 'Scatter Plot'), ('AREA', 'Area Chart'), ('RADAR', 'Radar Chart'), ('GAUGE', 'Gauge Chart')], max_length=20, verbose_name='Chart Type')),
                ('config', models.JSONField(default=dict, verbose_name='Widget Configuration')),
                ('position_x', models.PositiveIntegerField(default=0, verbose_name='X Position')),
                ('position_y', models.PositiveIntegerField(default=0, verbose_name='Y Position')),
                ('width', models.PositiveIntegerField(default=4, verbose_name='Width')),
                ('height', models.PositiveIntegerField(default=3, verbose_name='Height')),
                ('color_scheme', models.CharField(default='default', max_length=50, verbose_name='Color Scheme')),
                ('custom_css', models.TextField(blank=True, verbose_name='Custom CSS')),
                ('refresh_interval', models.PositiveIntegerField(blank=True, null=True, verbose_name='Refresh Interval (seconds)')),
                ('is_interactive', models.BooleanField(default=True, verbose_name='Is Interactive')),
                ('drill_down_enabled', models.BooleanField(default=False, verbose_name='Drill Down Enabled')),
            ],
            options={
                'verbose_name': 'Dashboard Widget',
                'verbose_name_plural': 'Dashboard Widgets',
                'db_table': 'analytics_dashboard_widget',
                'ordering': ['dashboard', 'position_y', 'position_x'],
            },
        ),
        migrations.CreateModel(
            name='DataSource',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('name', models.CharField(max_length=200, verbose_name='Data Source Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('source_type', models.CharField(choices=[('DATABASE', 'Database'), ('API', 'API'), ('FILE', 'File'), ('STREAM', 'Real-time Stream'), ('EXTERNAL', 'External System')], max_length=20, verbose_name='Source Type')),
                ('connection_string', models.TextField(blank=True, verbose_name='Connection String')),
                ('config', models.JSONField(blank=True, default=dict, verbose_name='Configuration')),
                ('credentials', models.JSONField(blank=True, default=dict, verbose_name='Credentials')),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('ERROR', 'Error'), ('MAINTENANCE', 'Maintenance')], default='ACTIVE', max_length=20, verbose_name='Status')),
                ('last_sync', models.DateTimeField(blank=True, null=True, verbose_name='Last Sync')),
                ('sync_frequency', models.CharField(choices=[('REAL_TIME', 'Real-time'), ('HOURLY', 'Hourly'), ('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly')], default='DAILY', max_length=20, verbose_name='Sync Frequency')),
                ('data_quality_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Data Quality Score')),
                ('error_count', models.PositiveIntegerField(default=0, verbose_name='Error Count')),
                ('last_error', models.TextField(blank=True, verbose_name='Last Error Message')),
                ('schema_version', models.CharField(default='1.0', max_length=20, verbose_name='Schema Version')),
                ('is_public', models.BooleanField(default=False, verbose_name='Is Public')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='Tags')),
            ],
            options={
                'verbose_name': 'Data Source',
                'verbose_name_plural': 'Data Sources',
                'db_table': 'analytics_data_source',
                'ordering': ['name', 'source_type'],
            },
        ),
        migrations.CreateModel(
            name='InstitutionalAnalytics',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('total_students', models.PositiveIntegerField(default=0, verbose_name='Total Students')),
                ('male_students', models.PositiveIntegerField(default=0, verbose_name='Male Students')),
                ('female_students', models.PositiveIntegerField(default=0, verbose_name='Female Students')),
                ('other_gender_students', models.PositiveIntegerField(default=0, verbose_name='Other Gender Students')),
                ('total_revenue', models.DecimalField(decimal_places=2, default=0.0, max_digits=15, verbose_name='Total Revenue')),
                ('total_expenses', models.DecimalField(decimal_places=2, default=0.0, max_digits=15, verbose_name='Total Expenses')),
                ('fee_collection_percentage', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Fee Collection Percentage')),
                ('total_staff', models.PositiveIntegerField(default=0, verbose_name='Total Staff')),
                ('student_teacher_ratio', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Student-Teacher Ratio')),
                ('average_attendance', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Average Attendance')),
                ('pass_percentage', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Pass Percentage')),
                ('calculated_at', models.DateTimeField(auto_now=True, verbose_name='Calculated At')),
            ],
            options={
                'verbose_name': 'Institutional Analytics',
                'verbose_name_plural': 'Institutional Analytics',
                'db_table': 'analytics_institutional',
                'ordering': ['-academic_year'],
            },
        ),
        migrations.CreateModel(
            name='KPI',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('name', models.CharField(max_length=200, verbose_name='KPI Name')),
                ('code', models.CharField(max_length=100, unique=True, verbose_name='KPI Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('category', models.CharField(choices=[('ACADEMIC', 'Academic'), ('FINANCIAL', 'Financial'), ('OPERATIONAL', 'Operational'), ('STUDENT', 'Student Performance'), ('STAFF', 'Staff Performance'), ('INFRASTRUCTURE', 'Infrastructure'), ('CUSTOM', 'Custom')], max_length=20, verbose_name='Category')),
                ('calculation_query', models.TextField(blank=True, verbose_name='Calculation Query/Script')),
                ('calculation_frequency', models.CharField(choices=[('REAL_TIME', 'Real-time'), ('HOURLY', 'Hourly'), ('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly')], default='DAILY', max_length=20, verbose_name='Calculation Frequency')),
                ('target_value', models.DecimalField(blank=True, decimal_places=4, max_digits=15, null=True, verbose_name='Target Value')),
                ('min_threshold', models.DecimalField(blank=True, decimal_places=4, max_digits=15, null=True, verbose_name='Minimum Threshold')),
                ('max_threshold', models.DecimalField(blank=True, decimal_places=4, max_digits=15, null=True, verbose_name='Maximum Threshold')),
                ('direction', models.CharField(choices=[('ASCENDING', 'Higher is Better'), ('DESCENDING', 'Lower is Better'), ('NEUTRAL', 'Neutral')], default='ASCENDING', max_length=20, verbose_name='Optimization Direction')),
                ('unit', models.CharField(blank=True, max_length=50, verbose_name='Unit of Measurement')),
                ('format_string', models.CharField(blank=True, max_length=100, verbose_name='Display Format')),
                ('decimal_places', models.PositiveIntegerField(default=2, verbose_name='Decimal Places')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('last_calculated', models.DateTimeField(blank=True, null=True, verbose_name='Last Calculated')),
                ('current_value', models.DecimalField(blank=True, decimal_places=4, max_digits=15, null=True, verbose_name='Current Value')),
                ('chart_type', models.CharField(choices=[('LINE', 'Line Chart'), ('BAR', 'Bar Chart'), ('PIE', 'Pie Chart'), ('GAUGE', 'Gauge'), ('NUMBER', 'Single Number'), ('TABLE', 'Table')], default='NUMBER', max_length=50, verbose_name='Default Chart Type')),
                ('color_scheme', models.CharField(default='blue', max_length=50, verbose_name='Color Scheme')),
            ],
            options={
                'verbose_name': 'KPI',
                'verbose_name_plural': 'KPIs',
                'db_table': 'analytics_kpi',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='KPIValue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('value', models.DecimalField(decimal_places=4, max_digits=15, verbose_name='KPI Value')),
                ('period_start', models.DateTimeField(verbose_name='Period Start')),
                ('period_end', models.DateTimeField(verbose_name='Period End')),
                ('period_type', models.CharField(choices=[('HOUR', 'Hour'), ('DAY', 'Day'), ('WEEK', 'Week'), ('MONTH', 'Month'), ('QUARTER', 'Quarter'), ('YEAR', 'Year')], max_length=20, verbose_name='Period Type')),
                ('data_points', models.PositiveIntegerField(default=1, verbose_name='Data Points Count')),
                ('confidence_level', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Confidence Level')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
            ],
            options={
                'verbose_name': 'KPI Value',
                'verbose_name_plural': 'KPI Values',
                'db_table': 'analytics_kpi_value',
                'ordering': ['kpi', '-period_end'],
            },
        ),
        migrations.CreateModel(
            name='PredictiveModel',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('name', models.CharField(max_length=200, verbose_name='Model Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('model_type', models.CharField(choices=[('CLASSIFICATION', 'Classification'), ('REGRESSION', 'Regression'), ('CLUSTERING', 'Clustering'), ('FORECASTING', 'Forecasting'), ('ANOMALY_DETECTION', 'Anomaly Detection'), ('RECOMMENDATION', 'Recommendation')], max_length=20, verbose_name='Model Type')),
                ('algorithm', models.CharField(max_length=100, verbose_name='Algorithm')),
                ('hyperparameters', models.JSONField(blank=True, default=dict, verbose_name='Hyperparameters')),
                ('feature_columns', models.JSONField(default=list, verbose_name='Feature Columns')),
                ('target_column', models.CharField(max_length=100, verbose_name='Target Column')),
                ('training_query', models.TextField(blank=True, verbose_name='Training Data Query')),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('TRAINING', 'Training'), ('TRAINED', 'Trained'), ('DEPLOYED', 'Deployed'), ('ERROR', 'Error'), ('ARCHIVED', 'Archived')], default='DRAFT', max_length=20, verbose_name='Status')),
                ('accuracy', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True, verbose_name='Accuracy Score')),
                ('precision', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True, verbose_name='Precision Score')),
                ('recall', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True, verbose_name='Recall Score')),
                ('f1_score', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True, verbose_name='F1 Score')),
                ('trained_at', models.DateTimeField(blank=True, null=True, verbose_name='Trained At')),
                ('training_duration', models.DurationField(blank=True, null=True, verbose_name='Training Duration')),
                ('model_file', models.FileField(blank=True, null=True, upload_to='analytics/models/', verbose_name='Model File')),
                ('last_prediction', models.DateTimeField(blank=True, null=True, verbose_name='Last Prediction')),
                ('prediction_count', models.PositiveIntegerField(default=0, verbose_name='Prediction Count')),
            ],
            options={
                'verbose_name': 'Predictive Model',
                'verbose_name_plural': 'Predictive Models',
                'db_table': 'analytics_predictive_model',
                'ordering': ['name', 'model_type'],
            },
        ),
        migrations.CreateModel(
            name='Report',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('title', models.CharField(max_length=200, verbose_name='Report Title')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('report_type', models.CharField(choices=[('DASHBOARD', 'Dashboard'), ('TABULAR', 'Tabular Report'), ('VISUALIZATION', 'Visualization'), ('SUMMARY', 'Summary Report'), ('DETAILED', 'Detailed Report'), ('COMPARATIVE', 'Comparative Analysis')], max_length=20, verbose_name='Report Type')),
                ('config', models.JSONField(default=dict, verbose_name='Report Configuration')),
                ('filters', models.JSONField(blank=True, default=dict, verbose_name='Default Filters')),
                ('parameters', models.JSONField(blank=True, default=list, verbose_name='Report Parameters')),
                ('access_level', models.CharField(choices=[('PUBLIC', 'Public'), ('PRIVATE', 'Private'), ('ROLE_BASED', 'Role Based'), ('DEPARTMENT', 'Department')], default='PRIVATE', max_length=20, verbose_name='Access Level')),
                ('allowed_roles', models.JSONField(blank=True, default=list, verbose_name='Allowed Roles')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='Is Scheduled')),
                ('schedule_frequency', models.CharField(blank=True, choices=[('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly')], max_length=20, verbose_name='Schedule Frequency')),
                ('schedule_time', models.TimeField(blank=True, null=True, verbose_name='Schedule Time')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('is_template', models.BooleanField(default=False, verbose_name='Is Template')),
                ('last_generated', models.DateTimeField(blank=True, null=True, verbose_name='Last Generated')),
                ('generation_time', models.DurationField(blank=True, null=True, verbose_name='Last Generation Time')),
                ('data_source_count', models.PositiveIntegerField(default=0, verbose_name='Data Source Count')),
            ],
            options={
                'verbose_name': 'Report',
                'verbose_name_plural': 'Reports',
                'db_table': 'analytics_report',
                'ordering': ['title', 'report_type'],
            },
        ),
        migrations.CreateModel(
            name='ReportExecution',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('parameters', models.JSONField(blank=True, default=dict, verbose_name='Execution Parameters')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('RUNNING', 'Running'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20, verbose_name='Status')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='Started At')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Completed At')),
                ('execution_duration', models.DurationField(blank=True, null=True, verbose_name='Execution Duration')),
                ('result_data', models.JSONField(blank=True, null=True, verbose_name='Result Data')),
                ('result_size', models.PositiveIntegerField(default=0, verbose_name='Result Size (bytes)')),
                ('row_count', models.PositiveIntegerField(default=0, verbose_name='Row Count')),
                ('error_message', models.TextField(blank=True, verbose_name='Error Message')),
                ('stack_trace', models.TextField(blank=True, verbose_name='Stack Trace')),
                ('output_format', models.CharField(choices=[('JSON', 'JSON'), ('CSV', 'CSV'), ('EXCEL', 'Excel'), ('PDF', 'PDF'), ('HTML', 'HTML')], default='JSON', max_length=20, verbose_name='Output Format')),
                ('output_file', models.FileField(blank=True, null=True, upload_to='analytics/reports/', verbose_name='Output File')),
            ],
            options={
                'verbose_name': 'Report Execution',
                'verbose_name_plural': 'Report Executions',
                'db_table': 'analytics_report_execution',
                'ordering': ['-started_at', 'report'],
            },
        ),
        migrations.CreateModel(
            name='StudentPerformanceAnalytics',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True, verbose_name='Universal ID')),
                ('data_signature', models.CharField(blank=True, editable=False, max_length=64, verbose_name='Data Integrity Signature')),
                ('encryption_version', models.CharField(default='v1', editable=False, max_length=10, verbose_name='Encryption Scheme Version')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Creation Timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Last Modification Timestamp')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False indicates the record has been soft deleted', verbose_name='Active Status')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='Deletion Timestamp')),
                ('deletion_reason', models.TextField(blank=True, help_text='Mandatory for compliance: Reason for record deletion', null=True, verbose_name='Deletion Justification')),
                ('deletion_category', models.CharField(blank=True, choices=[('USER_REQUEST', 'User Request'), ('ADMIN_ACTION', 'Administrative Action'), ('SYSTEM_CLEANUP', 'System Cleanup'), ('COMPLIANCE', 'Compliance Requirement'), ('OTHER', 'Other')], max_length=50, null=True, verbose_name='Deletion Category')),
                ('request_count', models.PositiveIntegerField(default=0, verbose_name='API Request Count')),
                ('last_request_at', models.DateTimeField(blank=True, null=True, verbose_name='Last API Request')),
                ('rate_limit_key', models.CharField(blank=True, editable=False, max_length=100, verbose_name='Rate Limit Identifier')),
                ('overall_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Overall Percentage')),
                ('class_rank', models.PositiveIntegerField(blank=True, null=True, verbose_name='Class Rank')),
                ('total_students', models.PositiveIntegerField(default=0, verbose_name='Total Students in Class')),
                ('subject_performance', models.JSONField(default=dict, verbose_name='Subject-wise Performance')),
                ('strong_subjects', models.JSONField(blank=True, default=list, verbose_name='Strong Subjects')),
                ('weak_subjects', models.JSONField(blank=True, default=list, verbose_name='Weak Subjects')),
                ('attendance_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Attendance Percentage')),
                ('total_present', models.PositiveIntegerField(default=0, verbose_name='Total Present')),
                ('total_absent', models.PositiveIntegerField(default=0, verbose_name='Total Absent')),
                ('total_leave', models.PositiveIntegerField(default=0, verbose_name='Total Leave')),
                ('participation_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Participation Score')),
                ('discipline_incidents', models.PositiveIntegerField(default=0, verbose_name='Discipline Incidents')),
                ('awards_count', models.PositiveIntegerField(default=0, verbose_name='Awards Count')),
                ('performance_trend', models.CharField(blank=True, choices=[('IMPROVING', 'Improving'), ('DECLINING', 'Declining'), ('STABLE', 'Stable'), ('FLUCTUATING', 'Fluctuating')], max_length=20, verbose_name='Performance Trend')),
                ('growth_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Growth Percentage')),
                ('at_risk_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='At-Risk Score')),
                ('predicted_performance', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Predicted Performance')),
                ('recommendation', models.TextField(blank=True, verbose_name='Recommendation')),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_analytics', to='academics.academicyear', verbose_name='Academic Year')),
            ],
            options={
                'verbose_name': 'Student Performance Analytics',
                'verbose_name_plural': 'Student Performance Analytics',
                'db_table': 'analytics_student_performance',
                'ordering': ['academic_year', 'class_rank'],
            },
        ),
    ]
